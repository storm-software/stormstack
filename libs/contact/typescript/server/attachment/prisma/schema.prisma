

// -------------------------------------------------------------------
//
//                         Open System
//                  ⚡Storm - Prisma Schema⚡
//
//                 ** DO NOT MODIFY THIS FILE **
// This file is automatically generated by the ⚡Storm CLI
// and should not be manually updated. Any changes made to
// this file will be overwritten the next time the schema is
// generated.
//
// Repository: https://github.com/sullivanpj/open-system
// Documentation: https://sullivanpj.github.io/open-system/
// Contact: https://patsullivan.org/contact
//
// -------------------------------------------------------------------


datasource db {
    provider="sqlite"
    url="file:./dev.db"
}

generator js {
    provider = "prisma-client-js"
    output = "../../../../../../node_modules/.prisma/client/contact-attachment"
}

/// @@allow('create,update,delete,read', true)
model Contact {
    id String @id() @default(uuid())
    createdAt DateTime @default(now())
    createdBy String
    updatedAt DateTime? @updatedAt()
    updatedBy String?
    reason String @default("Other")
    /// @length(1, 100)
    details String?
    /// @email
    email String
    /// @length(1, 20)
    phoneNumber String?
    /// @length(1, 50)
    firstName String?
    /// @length(1, 50)
    lastName String?
    /// @length(1, 100)
    addressLine1 String?
    /// @length(1, 100)
    addressLine2 String?
    /// @length(1, 20)
    postalCode String?
    /// @length(1, 50)
    city String?
    /// @length(1, 50)
    state String?
    /// @length(1, 2)
    countryCode String?
    /// @length(1, 50)
    title String?
    /// @length(1, 50)
    companyName String?
    /// @url
    url String?
    attachments ContactAttachment[]

    storm_guard Boolean @default(true)
    storm_transaction String?

    @@index([storm_transaction])
}

/// @@allow('create,update,delete,read', true)
model ContactAttachment {
    id String @id() @default(cuid())
    createdAt DateTime @default(now())
    createdBy String
    updatedAt DateTime? @updatedAt()
    updatedBy String?
    /// @length(1, 100)
    name String
    /// @length(1, 100)
    path String
    status String @default("Pending")
    contact Contact @relation(fields: [contactId], references: [id])
    contactId String

    storm_guard Boolean @default(true)
    storm_transaction String?

    @@index([storm_transaction])
    @@unique([name, path])
}